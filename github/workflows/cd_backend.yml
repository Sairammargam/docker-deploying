name: CD for Backend(docker - vm)
on:
   push:
      branches: [ main ]
jobs:
   build:
       runs-on: ubuntu-latest
       steps:
          - uses: actions/checkout@v2
            with:
               fetch-depth:0
          - name: docker login
            uses: docker/login-action@v2
            with:
              username: ${{ secrets.DOCKERHUB_USERNAME }}
              password: ${{ secrets.DOCKERHUB_TOKEN }}
          - name: build and push 
            uses: docker/build-push-action@v4
            with:
              context: .
              file: ./docker/Dockerfile.backend
              push: true
              tags: sairamcodes/userapp-backend: ${{ github.sha }}


